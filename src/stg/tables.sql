-- CREATE Database/schema

CREATE OR REPLACE DATABASE TPCDI_STG;

CREATE OR REPLACE SCHEMA TPCDI_STG.PUBLIC;

-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.ACCOUNT_STG ( CDC_FLAG CHAR(1) COMMENT 'I OR U DENOTES INSERT OR UPDATE', CDC_DSN INT COMMENT 'DATABASE SEQUENCE NUMBER', CA_ID INT NOT NULL COMMENT 'CUSTOMER ACCOUNT IDENTIFIER', CA_B_ID INT NOT NULL COMMENT 'IDENTIFIER OF THE MANAGING BROKER', CA_C_ID INT NOT NULL COMMENT 'OWNING CUSTOMER IDENTIFIER', CA_NAME CHAR(50) COMMENT 'NAME OF CUSTOMER ACCOUNT', CA_TAX_ST INT COMMENT '0, 1 OR 2 TAX STATUS OF THIS ACCOUNT', CA_ST_ID CHAR(4) COMMENT 'ACTV OR INAC CUSTOMER STATUS TYPE IDENTIFIER' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.ACCOUNT_STG_STM
ON TABLE TPCDI_STG.PUBLIC.ACCOUNT_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.CASHTRANSACTION_STG ( CDC_FLAG CHAR(1) COMMENT 'I DENOTES INSERT', CDC_DSN INT COMMENT 'DATABASE SEQUENCE NUMBER', CT_CA_ID INT NOT NULL COMMENT 'CUSTOMER ACCOUNT IDENTIFIER', CT_DTS DATETIME NOT NULL COMMENT 'TIMESTAMP OF WHEN THE TRADE TOOK PLACE', CT_AMT NUMBER(10,2) NOT NULL COMMENT 'AMOUNT OF THE CASH TRANSACTION', CT_NAME CHAR(100) NOT NULL COMMENT 'TRANSACTION NAME OR DESCRIPTION: E.G. "CASH FROM SALE OF DUPONT STOCK".' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.CASHTRANSACTION_STG_STM
ON TABLE TPCDI_STG.PUBLIC.CASHTRANSACTION_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.CUSTOMER_MGMT_STG ( XML VARIANT COMMENT 'XML STRING' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.CUSTOMER_MGMT_STG_STM
ON TABLE TPCDI_STG.PUBLIC.CUSTOMER_MGMT_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.CUSTOMER_STG ( CDC_FLAG CHAR(1) COMMENT 'DENOTES INSERT OR UPDATE', CDC_DSN INT COMMENT 'DATABASE SEQUENCE NUMBER', C_ID INT NOT NULL COMMENT 'CUSTOMER IDENTIFIER', C_TAX_ID CHAR(20) NOT NULL COMMENT 'CUSTOMER’S TAX IDENTIFIER', C_ST_ID CHAR(4) COMMENT 'ACTV OR INAC CUSTOMER STATUS TYPE IDENTIFIER', C_L_NAME CHAR(25) NOT NULL COMMENT 'PRIMARY CUSTOMER''S LAST NAME.', C_F_NAME CHAR(20) NOT NULL COMMENT 'PRIMARY CUSTOMER''S FIRST NAME.', C_M_NAME CHAR(1) COMMENT 'PRIMARY CUSTOMER''S MIDDLE INITIAL', C_GNDR CHAR(1) COMMENT 'GENDER OF THE PRIMARY CUSTOMER', C_TIER NUMBER(1) COMMENT 'CUSTOMER TIER', C_DOB DATE NOT NULL COMMENT 'CUSTOMER’S DATE OF BIRTH, AS YYYY-MM-DD.', C_ADLINE1 CHAR(80) NOT NULL COMMENT 'ADDRESS LINE 1', C_ADLINE2 CHAR(80) COMMENT 'ADDRESS LINE 2', C_ZIPCODE CHAR(12) NOT NULL COMMENT 'ZIP OR POSTAL CODE', C_CITY CHAR(25) NOT NULL COMMENT 'CITY', C_STATE_PROV CHAR(20) NOT NULL COMMENT 'STATE OR PROVINCE', C_CTRY CHAR(24) COMMENT 'COUNTRY', C_CTRY_1 CHAR(3) COMMENT 'COUNTRY CODE FOR CUSTOMER''S PHONE 1.', C_AREA_1 CHAR(3) COMMENT 'AREA CODE FOR CUSTOMER''S PHONE 1.', C_LOCAL_1 CHAR(10) COMMENT 'LOCAL NUMBER FOR CUSTOMER''S PHONE 1.', C_EXT_1 CHAR(5) COMMENT 'EXTENSION NUMBER FOR CUSTOMER''S PHONE 1.', C_CTRY_2 CHAR(3) COMMENT 'COUNTRY CODE FOR CUSTOMER''S PHONE 2.', C_AREA_2 CHAR(3) COMMENT 'AREA CODE FOR CUSTOMER''S PHONE 2.', C_LOCAL_2 CHAR(10) COMMENT 'LOCAL NUMBER FOR CUSTOMER''S PHONE 2.', C_EXT_2 CHAR(5) COMMENT 'EXTENSION NUMBER FOR CUSTOMER''S PHONE 2.', C_CTRY_3 CHAR(3) COMMENT 'COUNTRY CODE FOR CUSTOMER''S PHONE 3.', C_AREA_3 CHAR(3) COMMENT 'AREA CODE FOR CUSTOMER''S PHONE 3.', C_LOCAL_3 CHAR(10) COMMENT 'LOCAL NUMBER FOR CUSTOMER''S PHONE 3.', C_EXT_3 CHAR(5) COMMENT 'EXTENSION NUMBER FOR CUSTOMER''S PHONE 3.', C_EMAIL_1 CHAR(50) COMMENT 'CUSTOMER''S E-MAIL ADDRESS 1.', C_EMAIL_2 CHAR(50) COMMENT 'CUSTOMER''S E-MAIL ADDRESS 2.', C_LCL_TX_ID CHAR(4) NOT NULL COMMENT 'CUSTOMER''S LOCAL TAX RATE', C_NAT_TX_ID CHAR(4) NOT NULL COMMENT 'CUSTOMER''S NATIONAL TAX RATE' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.CUSTOMER_STG_STM
ON TABLE TPCDI_STG.PUBLIC.CUSTOMER_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.DAILYMARKET_STG ( CDC_FLAG CHAR(1) COMMENT 'I DENOTES INSERT', CDC_DSN INT COMMENT 'DATABASE SEQUENCE NUMBER', DM_DATE DATE NOT NULL COMMENT 'DATE OF LAST COMPLETED TRADING DAY.', DM_S_SYMB CHAR(15) NOT NULL COMMENT 'SECURITY SYMBOL OF THE SECURITY', DM_CLOSE NUMBER(8,2) NOT NULL COMMENT 'CLOSING PRICE OF THE SECURITY ON THIS DAY.', DM_HIGH NUMBER(8,2) NOT NULL COMMENT 'HIGHEST PRICE FOR THE SECUIRITY ON THIS DAY.', DM_LOW NUMBER(8,2) NOT NULL COMMENT 'LOWEST PRICE FOR THE SECURITY ON THIS DAY.', DM_VOL INT NOT NULL COMMENT 'VOLUME OF THE SECURITY ON THIS DAY.' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.DAILYMARKET_STG_STM
ON TABLE TPCDI_STG.PUBLIC.DAILYMARKET_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.DATE_STG ( SK_DATEID INT NOT NULL COMMENT 'SURROGATE KEY FOR THE DATE', DATEVALUE CHAR(20) NOT NULL COMMENT 'THE DATE AS TEXT, E.G. “2004-07-07”', DATEDESC CHAR(20) NOT NULL COMMENT 'THE DATE MONTH DAY, YYYY, E.G. JULY 7, 2004', CALENDARYEARID NUMBER(4) NOT NULL COMMENT 'YEAR NUMBER AS A NUMBER', CALENDARYEARDESC CHAR(20) NOT NULL COMMENT 'YEAR NUMBER AS TEXT', CALENDARQTRID NUMBER(5) NOT NULL COMMENT 'QUARTER AS A NUMBER, E.G. 20042', CALENDARQTRDESC CHAR(20) NOT NULL COMMENT 'QUARTER AS TEXT, E.G. “2004 Q2”', CALENDARMONTHID NUMBER(6) NOT NULL COMMENT 'MONTH AS A NUMBER, E.G. 20047', CALENDARMONTHDESC CHAR(20) NOT NULL COMMENT 'MONTH AS TEXT, E.G. “2004 JULY”', CALENDARWEEKID NUMBER(6) NOT NULL COMMENT 'WEEK AS A NUMBER, E.G. 200428', CALENDARWEEKDESC CHAR(20) NOT NULL COMMENT 'WEEK AS TEXT, E.G. “2004-W28”', DAYOFWEEKNUM NUMBER(1) NOT NULL COMMENT 'DAY OF WEEK AS A NUMBER, E.G. 3', DAYOFWEEKDESC CHAR(10) NOT NULL COMMENT 'DAY OF WEEK AS TEXT, E.G. “WEDNESDAY”', FISCALYEARID NUMBER(4) NOT NULL COMMENT 'FISCAL YEAR AS A NUMBER, E.G. 2005', FISCALYEARDESC CHAR(20) NOT NULL COMMENT 'FISCAL YEAR AS TEXT, E.G. “2005”', FISCALQTRID NUMBER(5) NOT NULL COMMENT 'FISCAL QUARTER AS A NUMBER, E.G. 20051', FISCALQTRDESC CHAR(20) NOT NULL COMMENT 'FISCAL QUARTER AS TEXT, E.G. “2005 Q1”', HOLIDAYFLAG BOOLEAN COMMENT 'INDICATES HOLIDAYS' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.DATE_STG_STM
ON TABLE TPCDI_STG.PUBLIC.DATE_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.FINWIRE_STG ( PTS VARCHAR(15) NOT NULL COMMENT 'POSTING DATE & TIME AS YYYYMMDD-HHMMSS - FIN, CMP, SEC', REC_TYPE VARCHAR(3) NOT NULL COMMENT '“FIN”, "CMP", OR "SEC" - FIN, CMP, SEC', COMPANY_NAME VARCHAR(60) NOT NULL COMMENT 'NAME OF THE COMPANY - CMP', CIK VARCHAR(10) NOT NULL COMMENT 'COMPANY IDENTIFICATION CODE FROM SEC - CMP', STATUS VARCHAR(4) NOT NULL COMMENT 'ACTV FOR ACTIVE COMPANY, INAC FOR INACTIVE - CMP, SEC', INDUSTRY_ID VARCHAR(2) NOT NULL COMMENT 'CODE FOR INDUSTRY SEGMENT - CMP', SP_RATING VARCHAR(4) NOT NULL COMMENT 'S&P RATING - CMP', FOUNDING_DATE VARCHAR(8) COMMENT 'A DATE AS YYYYMMDD - CMP', ADDR_LINE1 VARCHAR(80) NOT NULL COMMENT 'MAILING ADDRESS - CMP', ADDR_LINE2 VARCHAR(80) COMMENT 'MAILING ADDRESS - CMP', POSTAL_CODE VARCHAR(12) NOT NULL COMMENT 'MAILING ADDRESS - CMP', CITY VARCHAR(25) NOT NULL COMMENT 'MAILING ADDRESS - CMP', STATE_PROVINCE VARCHAR(20) NOT NULL COMMENT 'MAILING ADDRESS - CMP', COUNTRY VARCHAR(24) COMMENT 'MAILING ADDRESS - CMP', CEO_NAME VARCHAR(46) NOT NULL COMMENT 'NAME OF COMPANY CEO - CMP', DESCRIPTION VARCHAR(150) NOT NULL COMMENT 'DESCRIPTION OF THE COMPANY - CMP', YEAR VARCHAR(4) NOT NULL COMMENT 'YEAR OF THE QUARTER END. - FIN', QUARTER VARCHAR(1) NOT NULL COMMENT 'QUARTER NUMBER: VALID VALUES ARE 1, 2, 3, 4 - FIN', QTR_START_DATE VARCHAR(8) NOT NULL COMMENT 'START DATE OF QUARTER, AS YYYYMMDD - FIN', POSTING_DATE VARCHAR(8) NOT NULL COMMENT 'POSTING DATE OF QUARTERLY REPORT AS YYYYMMDD - FIN', REVENUE VARCHAR(17) NOT NULL COMMENT 'REPORTED REVENUE FOR THE QUARTER - FIN', EARNINGS VARCHAR(17) NOT NULL COMMENT 'NET EARNINGS REPORTED FOR THE QUARTER - FIN', EPS VARCHAR(12) NOT NULL COMMENT 'BASIC EARNINGS PER SHARE FOR THE QUARTER - FIN', DILUTED_EPS VARCHAR(12) NOT NULL COMMENT 'DILUTED EARNINGS PER SHARE FOR THE QUARTER - FIN', MARGIN VARCHAR(12) NOT NULL COMMENT 'PROFIT DIVIDED BY REVENUES FOR THE QUARTER - FIN', INVENTORY VARCHAR(17) NOT NULL COMMENT 'VALUE OF INVENTORY ON HAND AT END OF QUARTER - FIN', ASSETS VARCHAR(17) NOT NULL COMMENT 'VALUE OF TOTAL ASSETS AT THE END OF QUARTER - FIN', LIABILITIES VARCHAR(17) NOT NULL COMMENT 'VALUE OF TOTAL LIABILITIES AT THE END OF QUARTER - FIN', SH_OUT VARCHAR(13) NOT NULL COMMENT 'AVERAGE NUMBER OF SHARES OUTSTANDING - FIN, SEC', DILUTED_SH_OUT VARCHAR(13) NOT NULL COMMENT 'AVERAGE NUMBER OF SHARES OUTSTANDING (DILUTED) - FIN', CO_NAME_OR_CIK VARCHAR(60) NOT NULL COMMENT 'COMPANY CIK NUMBER (IF ONLY DIGITS, 10 VARCHARS) OR NAME (IF NOT ONLY DIGITS, 60 VARCHARS) - FIN, SEC', SYMBOL VARCHAR(15) NOT NULL COMMENT 'SECURITY SYMBOL - SEC', ISSUE_TYPE VARCHAR(6) NOT NULL COMMENT 'ISSUE TYPE - SEC', NAME VARCHAR(70) NOT NULL COMMENT 'SECURITY NAME - SEC', EX_ID VARCHAR(6) NOT NULL COMMENT 'ID OF THE EXCHANGE THE SECURITY IS TRADED ON - SEC', FIRST_TRADE_DATE VARCHAR(8) NOT NULL COMMENT 'DATE OF FIRST TRADE AS YYYYMMDD - SEC', FIRST_TRADE_EXCHG VARCHAR(8) NOT NULL COMMENT 'DATE OF FIRST TRADE ON EXCHANGE AS YYYYMMDD - SEC', DIVIDEND VARCHAR(12) NOT NULL COMMENT 'DIVIDEND AS VALUE_T - SEC' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.FINWIRE_STG_CMP_STM
ON TABLE TPCDI_STG.PUBLIC.FINWIRE_STG
;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.FINWIRE_STG_FIN_STM
ON TABLE TPCDI_STG.PUBLIC.FINWIRE_STG
;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.FINWIRE_STG_SEC_STM
ON TABLE TPCDI_STG.PUBLIC.FINWIRE_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.HOLDINGHISTORY_STG ( CDC_FLAG CHAR(1) COMMENT 'I DENOTES INSERT', CDC_DSN INT COMMENT 'DATABASE SEQUENCE NUMBER', HH_H_T_ID NUMBER(15) NOT NULL COMMENT 'TRADE IDENTIFIER OF THE TRADE THAT ORIGINALLY CREATED THE HOLDING ROW.', HH_T_ID NUMBER(15) NOT NULL COMMENT 'TRADE IDENTIFIER OF THE CURRENT TRADE', HH_BEFORE_QTY NUMBER(6) NOT NULL COMMENT 'QUANTITY OF THIS SECURITY HELD BEFORE THE MODIFYING TRADE.', HH_AFTER_QTY NUMBER(6) NOT NULL COMMENT 'QUANTITY OF THIS SECURITY HELD AFTER THE MODIFYING TRADE.' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.HOLDINGHISTORY_STG_STM
ON TABLE TPCDI_STG.PUBLIC.HOLDINGHISTORY_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.HR_STG ( EMPLOYEEID NUMBER(11) NOT NULL COMMENT 'ID OF EMPLOYEE', MANAGERID NUMBER(11) NOT NULL COMMENT 'ID OF EMPLOYEE''S MANAGER', EMPLOYEEFIRSTNAME CHAR(30) NOT NULL COMMENT 'FIRST NAME', EMPLOYEELASTNAME CHAR(30) NOT NULL COMMENT 'LAST NAME', EMPLOYEEMI CHAR(1) COMMENT 'MIDDLE INITIAL', EMPLOYEEJOBCODE NUMBER(3) COMMENT 'NUMERIC JOB CODE', EMPLOYEEBRANCH CHAR(30) COMMENT 'FACILITY IN WHICH EMPLOYEE HAS OFFICE', EMPLOYEEOFFICE CHAR(10) COMMENT 'OFFICE NUMBER OR DESCRIPTION', EMPLOYEEPHONE CHAR(14) COMMENT 'EMPLOYEE PHONE NUMBER' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.HR_STG_STM
ON TABLE TPCDI_STG.PUBLIC.HR_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.INDUSTRY_STG ( IN_ID CHAR(2) NOT NULL COMMENT 'INDUSTRY CODE', IN_NAME CHAR(50) NOT NULL COMMENT 'INDUSTRY DESCRIPTION', IN_SC_ID CHAR(4) NOT NULL COMMENT 'SECTOR IDENTIFIER' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.INDUSTRY_STG_STM
ON TABLE TPCDI_STG.PUBLIC.INDUSTRY_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.PROSPECT_STG ( AGENCYID CHAR(30) NOT NULL COMMENT 'UNIQUE IDENTIFIER FROM AGENCY', LASTNAME CHAR(30) NOT NULL COMMENT 'LAST NAME', FIRSTNAME CHAR(30) NOT NULL COMMENT 'FIRST NAME', MIDDLEINITIAL CHAR(1) COMMENT 'MIDDLE INITIAL', GENDER CHAR(1) COMMENT '''M'' OR ''F'' OR ''U''', ADDRESSLINE1 CHAR(80) COMMENT 'POSTAL ADDRESS', ADDRESSLINE2 CHAR(80) COMMENT 'POSTAL ADDRESS', POSTALCODE CHAR(12) COMMENT 'POSTAL CODE', CITY CHAR(25) NOT NULL COMMENT 'CITY', STATE CHAR(20) NOT NULL COMMENT 'STATE OR PROVINCE', COUNTRY CHAR(24) COMMENT 'POSTAL COUNTRY', PHONE CHAR(30) COMMENT 'TELEPHONE NUMBER', INCOME NUMBER(9) COMMENT 'ANNUAL INCOME', NUMBERCARS NUMBER(2) COMMENT 'CARS OWNED', NUMBERCHILDREN NUMBER(2) COMMENT 'DEPENDENT CHILDREN', MARITALSTATUS CHAR(1) COMMENT '''S'' OR ''M'' OR ''D'' OR ''W'' OR ''U''', AGE NUMBER(3) COMMENT 'CURRENT AGE', CREDITRATING NUMBER(4) COMMENT 'NUMERIC RATING', OWNORRENTFLAG CHAR(1) COMMENT '''O'' OR ''R'' OR ''U''', EMPLOYER CHAR(30) COMMENT 'NAME OF EMPLOYER', NUMBERCREDITCARDS NUMBER(2) COMMENT 'CREDIT CARDS', NETWORTH NUMBER(12) COMMENT 'ESTIMATED TOTAL NET WORTH' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.PROSPECT_STG_STM
ON TABLE TPCDI_STG.PUBLIC.PROSPECT_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.STATUSTYPE_STG ( ST_ID CHAR(4) NOT NULL COMMENT 'STATUS CODE', ST_NAME CHAR(10) NOT NULL COMMENT 'STATUS DESCRIPTION' ) ; 

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.STATUSTYPE_STG_STM
ON TABLE TPCDI_STG.PUBLIC.STATUSTYPE_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.TAXRATE_STG ( TX_ID CHAR(4) NOT NULL COMMENT 'TAX RATE CODE', TX_NAME CHAR(50) NOT NULL COMMENT 'TAX RATE DESCRIPTION', TX_RATE NUMBER(6,5) NOT NULL COMMENT 'TAX RATE' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.TAXRATE_STG_STM
ON TABLE TPCDI_STG.PUBLIC.TAXRATE_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.TIME_STG ( SK_TIMEID INT NOT NULL COMMENT 'SURROGATE KEY FOR THE TIME' , TIMEVALUE CHAR(20) NOT NULL COMMENT 'THE TIME AS TEXT, E.G. “01:23:45”' , HOURID NUMBER(2) NOT NULL COMMENT 'HOUR NUMBER AS A NUMBER, E.G. 01' , HOURDESC CHAR(20) NOT NULL COMMENT 'HOUR NUMBER AS TEXT, E.G. “01”' , MINUTEID NUMBER(2) NOT NULL COMMENT 'MINUTE AS A NUMBER, E.G. 23' , MINUTEDESC CHAR(20) NOT NULL COMMENT 'MINUTE AS TEXT, E.G. “01:23”' , SECONDID NUMBER(2) NOT NULL COMMENT 'SECOND AS A NUMBER, E.G. 45' , SECONDDESC CHAR(20) NOT NULL COMMENT 'SECOND AS TEXT, E.G. “01:23:45”' , MARKETHOURSFLAG BOOLEAN COMMENT 'INDICATES A TIME DURING MARKET HOURS' , OFFICEHOURSFLAG BOOLEAN COMMENT 'INDICATES A TIME DURING OFFICE HOURS' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.TIME_STG_STM
ON TABLE TPCDI_STG.PUBLIC.TIME_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.TRADEHISTORY_STG (   TH_T_ID NUMBER(15) NOT NULL COMMENT 'TRADE IDENTIFIER. CORRESPONDS TO T_ID IN THE TRADE.TXT FILE' , TH_DTS DATETIME NOT NULL COMMENT 'WHEN THE TRADE HISTORY WAS UPDATED.' , TH_ST_ID CHAR(4) NOT NULL COMMENT 'STATUS TYPE IDENTIFIER.' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.TRADEHISTORY_STG_I_STM
ON TABLE TPCDI_STG.PUBLIC.TRADEHISTORY_STG
;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.TRADEHISTORY_STG_U_STM
ON TABLE TPCDI_STG.PUBLIC.TRADEHISTORY_STG
;
-- CREATE TABLE STATEMENT COMMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.TRADETYPE_STG ( TT_ID CHAR(3) NOT NULL COMMENT 'TRADE TYPE CODE', TT_NAME CHAR(12) NOT NULL COMMENT 'TRADE TYPE DESCRIPTION', TT_IS_SELL INT NOT NULL COMMENT 'FLAG INDICATING A SALE', TT_IS_MRKT INT NOT NULL COMMENT 'FLAG INDICATING A MARKET ORDER' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.TRADETYPE_STG_STM
ON TABLE TPCDI_STG.PUBLIC.TRADETYPE_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.TRADE_STG ( CDC_FLAG CHAR(1) COMMENT 'I, U DENOTES INSERT, UPDATE' , CDC_DSN NUMBER(12) COMMENT 'DATABASE SEQUENCE NUMBER' , T_ID NUMBER(15) NOT NULL COMMENT 'TRADE IDENTIFIER.' , T_DTS DATETIME NOT NULL COMMENT 'DATE AND TIME OF TRADE.' , T_ST_ID CHAR(4) NOT NULL COMMENT 'STATUS TYPE IDENTIFIER' , T_TT_ID CHAR(3) NOT NULL COMMENT 'TRADE TYPE IDENTIFIER' , T_IS_CASH INT COMMENT 'IS THIS TRADE A CASH (1) OR MARGIN (0) TRADE?' , T_S_SYMB CHAR(15) NOT NULL COMMENT 'SECURITY SYMBOL OF THE SECURITY' , T_QTY NUMBER(6) COMMENT 'QUANTITY OF SECURITIES TRADED.' , T_BID_PRICE NUMBER(8,2) COMMENT 'THE REQUESTED UNIT PRICE.' , T_CA_ID NUMBER(11) NOT NULL COMMENT 'CUSTOMER ACCOUNT IDENTIFIER.' , T_EXEC_NAME CHAR(49) NOT NULL COMMENT 'NAME OF THE PERSON EXECUTING THE TRADE.' , T_TRADE_PRICE NUMBER(8,2) COMMENT 'UNIT PRICE AT WHICH THE SECURITY WAS TRADED.' , T_CHRG NUMBER(10,2) COMMENT 'FEE CHARGED FOR PLACING THIS TRADE REQUEST.' , T_COMM NUMBER(10,2) COMMENT 'COMMISSION EARNED ON THIS TRADE' , T_TAX NUMBER(10,2) COMMENT 'AMOUNT OF TAX DUE ON THIS TRADE' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.TRADE_STG_I_STM
ON TABLE TPCDI_STG.PUBLIC.TRADE_STG
;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.TRADE_STG_U_STM
ON TABLE TPCDI_STG.PUBLIC.TRADE_STG
;
-- CREATE TABLE STATEMENT

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.WATCH_HISTORY_STG ( CDC_FLAG CHAR(1) COMMENT 'I, U DENOTES INSERT, UPDATE', CDC_DSN NUMBER(12) COMMENT 'DATABASE SEQUENCE NUMBER', W_C_ID NUMBER(11) NOT NULL COMMENT 'CUSTOMER IDENTIFIER', W_S_SYMB CHAR(15) NOT NULL COMMENT 'SYMBOL OF THE SECURITY TO WATCH', W_DTS DATETIME NOT NULL COMMENT 'DATE AND TIME STAMP FOR THE ACTION', W_ACTION CHAR(4) COMMENT 'WHETHER ACTIVATING OR CANCELING THE WATCH' ) ;

CREATE OR REPLACE STREAM TPCDI_STG.PUBLIC.WATCH_HISTORY_STG_STM
ON TABLE TPCDI_STG.PUBLIC.WATCH_HISTORY_STG
;
